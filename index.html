<html>
<head>
	<title>Ivan's Game</title>
	<link rel="icon">
	<style>
		body      { background-color: white; }
	</style>
</head>
<body>
	<div id = state>
		
	</div>
	<div class="button" id="promoteButton">
		promote
	</div>
	<div class="button" id="passButton">
		pass
	</div>
	<div class="button" id="actionButton">
		action
	</div>


<script type="text/javascript">
	
let numPlayers = 2
let deckState = []
let graveyardState = [];
let currentPlayer = 0;
for (i = 0; i < numPlayers; i++) {
	deckState[i] = [['R', 1], ['G', 1], ['Y', 1], ['B', 1], ['R', 1], ['G', 1], ['Y', 1], ['B', 1]]; 
	graveyardState[i] = ['R', 'G', 'Y', 'B'];
}

document.getElementById('promoteButton').onclick = function() {
	play('promote')
}

document.getElementById('passButton').onclick = function() {
	play('pass')
}

document.getElementById('actionButton').onclick = function() {
	play('action')
}

function printState() {
	for (i = 0; i < numPlayers; i++) {
		console.log("player " + i + ":")
 		console.log('Deck: ' + deckState[i])
 		console.log('Graveyard: ' + graveyardState[i])
	}
}
printState()
console.log('currentPlayer : ' + currentPlayer)
console.log()
//card represented as {int player, int index, boolean isGraveyard}

function play(operation) {

	switch (operation) {
		case 'action' :
			action()
			break
		case 'promote' :
			promote()
			break
		case 'pass' :
			pass()
			break
	}

	currentPlayer = currentPlayer == numPlayers - 1 ? 0 : currentPlayer + 1
	printState()
	console.log()

	console.log('currentPlayer : ' + currentPlayer)

}

function pass() {
	currentDeck = deckState[currentPlayer];
	currentDeck.push(currentDeck[0])
	currentDeck.shift()
}

function promote() {
	pass()
	currentDeck[currentDeck.length - 1][1]++
}

function action() {
	let cardToPlay = deckState[currentPlayer][0]
	let color = cardToPlay[0]
	let level = cardToPlay[1]

	pass()

	currentDeck = deckState[currentPlayer]

	// RED
	switch (color) {
		case 'R' :
			switch (level) {
				case 1: 
					console.log('hi!')
				case 2:
				case 3:
				case 4:
			}
		case 'G':
			switch (level) {
				case 1: //Give this card.
					if (numPlayers != 2) {
						//select player
					}
					var otherPlayer = currentPlayer == 1 ? 0 : 1
					deckState[otherPlayer].push(currentDeck.pop())
					break
				case 2: // Give your top card.
					if (numPlayers != 2) {
						//select player
					}
					var otherPlayer = currentPlayer == 1 ? 0 : 1
					deckState[otherPlayer].push(currentDeck.shift())
					break
				case 3: // Give one of your cards. Set it to level 2.
					// select card to give 
					// select 


				case 4: // Bury a top card.
					//
					// select player to bury

			}
			break
		case 'Y':
			switch (level) {
				case 1: // Swap the top two cards in one deck. Or, swap the top cards from two opponents decks.
					//
					break
				case 2: // Move a top card anywhere within a deck.
					// 1. Select top card
					// 2. Select index in deck
					break
				case 3: // Move any other card anywhere within a deck.
					// 1. Select a card
					// 2. Select index in deck
					break
				case 4: // Move a card anywhere within a deck (including this card).
					// 1. Select a card
					// 2. Select index in deck
					break
			}
			break
		case 'B':
			// Copy a top card.

	}
}


</script>



</body>